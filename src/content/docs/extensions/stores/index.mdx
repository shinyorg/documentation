---
title: Stores
---
import NugetBadge from '/src/components/NugetBadge.tsx';
import { Steps } from '@astrojs/starlight/components';

Persist class properties across sessions with a single line of code. Shiny Stores provides a cross-platform key/value store abstraction that works on iOS, Android, Windows, and Blazor WebAssembly. Swap between Preferences, Secure Storage, Local Storage, and more — all behind the same API.

- [GitHub Repository](https://github.com/shinyorg/extensions)
- NuGet Packages
    - <NugetBadge name="Shiny.Extensions.Stores" showLabel={true} />
    - <NugetBadge name="Shiny.Extensions.Stores.Web" showLabel={true} />

## Features

- Unified key/value store interface across all platforms
- Built-in stores for Preferences, Secure Storage, Local Storage, Session Storage, and In-Memory
- Persistent services — bind `INotifyPropertyChanged` objects to a store and property changes are saved automatically
- Integrates with [Shiny Reflector](/extensions/reflector/) for AOT-safe, reflection-free binding
- Custom store support — implement `IKeyValueStore` for your own storage backend

## Setup

<Steps>
1. Install the NuGet package:
   ```bash
   dotnet add package Shiny.Extensions.Stores
   ```

2. Register stores in your DI container:
   ```csharp
   builder.Services.AddShinyStores();
   ```

3. For Blazor WebAssembly, also install and register the web stores:
   ```bash
   dotnet add package Shiny.Extensions.Stores.Web
   ```
   ```csharp
   builder.Services.AddShinyWebAssemblyStores();
   ```
</Steps>

## Available Stores

Each platform provides different store implementations, identified by a string alias:

| Platform | Alias | Implementation |
|---|---|---|
| Android | `settings` | SharedPreferences |
| Android | `secure` | EncryptedSharedPreferences |
| iOS / macOS | `settings` | NSUserDefaults |
| iOS / macOS | `secure` | Keychain |
| Windows | `settings` | ApplicationData.LocalSettings |
| Windows | `secure` | Secure Storage |
| Blazor WebAssembly | `settings` | localStorage |
| Blazor WebAssembly | `session` | sessionStorage |
| All | `memory` | In-memory dictionary (great for testing) |

## Using Stores Directly

Inject `IKeyValueStoreFactory` to access any store by alias:

```csharp
public class SettingsService(IKeyValueStoreFactory storeFactory)
{
    public void SaveTheme(string theme)
    {
        var store = storeFactory.GetStore("settings");
        store.Set("theme", theme);
    }

    public string GetTheme()
    {
        var store = storeFactory.GetStore("settings");
        return store.Get<string>("theme", "light");
    }

    public void SaveToken(string token)
    {
        var store = storeFactory.GetStore("secure");
        store.Set("auth_token", token);
    }
}
```

### Store Extension Methods

```csharp
store.Get<T>(key, defaultValue);        // Get with a default fallback
store.GetRequired<T>(key);              // Throws if key is not found
store.SetOrRemove(key, value);          // Removes the key if value is null
store.SetDefault<T>(key, value);        // Only sets if the key doesn't already exist
store.IncrementValue(key);              // Thread-safe integer increment
```

## Custom Stores

Implement `IKeyValueStore` to create your own storage backend:

```csharp
public class RedisKeyValueStore : IKeyValueStore
{
    public string Alias => "redis";

    public T? Get<T>(string key, T? defaultValue = default) { /* ... */ }
    public void Set<T>(string key, T value) { /* ... */ }
    public bool Contains(string key) { /* ... */ }
    public bool Remove(string key) { /* ... */ }
    public void Clear() { /* ... */ }
}
```

## AI Coding Assistant

An AI skill is available for Shiny Extensions (DI, Stores, and Web Hosting) to help generate service registrations, configure stores, and follow best practices directly in your IDE.

**Claude Code**
```bash
claude plugin add github:shinyorg/skills
```

**GitHub Copilot** — Copy the [shiny-extensions](https://github.com/shinyorg/skills/blob/main/skills/shiny-extensions/SKILL.md) skill file into your repository's [custom instructions](https://docs.github.com/en/copilot/customizing-copilot/adding-repository-custom-instructions).
