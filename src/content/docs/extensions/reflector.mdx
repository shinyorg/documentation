---
title: Reflector
---
import NugetBadge from '/src/components/NugetBadge.tsx';
import { Steps } from '@astrojs/starlight/components';

Reflection is awesome and super powerful, but also very slow and non-AOT compliant.  Using source generators, we look to solve some of those pain points.

## Features
- List Properties as well as what have getters and setters 
- Read/Write values
- Easier property indexers for loose typing access
- Fallback to reflection when a `reflector` is not available

## Usage

Using the following attribute and marking your class as partial
```csharp
[Shiny.Reflector.ReflectorAttribute]
public partial class MyClass
{
    public int MyProperty { get; set; }
    public string Message { get; set;}
}
```

:::note
Works on records as well, but you must use the `partial` keyword and attribute just like a class.
:::

Just that attribute allows you to do this:

```csharp
var myClass = new MySampleClass
{
    Name = "Hello World",
    Age = null
};

// NOTE: the use of GetReflector - a reflector class is generated for each class marked with the ReflectorAttribute
var reflector = myClass.GetReflector();
foreach (var prop in reflector.Properties) 
{
    var objValue = reflector[prop.Name];
    Console.WriteLine($"Property: {prop.Name} ({prop.Type}) - Current Value: {objValue}");
}

// generics for type casting
var name = reflector.GetValue<string>("Name");
Console.WriteLine("Reflector Name: " + name);

// indexers for loose typing
Console.WriteLine("Reflector Value: " + reflector["age"]);

// set with generics
reflector.SetValue("Age", 99);

// or just an object on the indexer
reflector["name"] = "Something Else";
Console.WriteLine("Reflector Name Value: " + reflector["NaMe"]);
Console.WriteLine("Reflector Age Value: " + reflector["NaMe"]);
```

## Setup

<Steps>
1. Install the NuGet package <NugetBadge name="Shiny.Reflector" showLabel={true} />
2. Add the following `[Reflector]` attribute to your class and make sure it is marked as `partial`:
   ```csharp
   [Shiny.Reflector.ReflectorAttribute]
   public partial class MyClass { ... }
   ```
3. Now you can use the `GetReflector()` (available on all objects) to get a reflector for that class (falls back to reflection if the reflector is not available):
   ```csharp
   var reflector = myClass.GetReflector();
   ```
</Steps>