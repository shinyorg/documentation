---
title: Configuration
description: VPN provider, server selection, proxy, and firewall configuration for Gluetun
---
import NugetBadge from '/src/components/NugetBadge.tsx';

<NugetBadge name="Shiny.Aspire.Hosting.Gluetun" showLabel={true} />

## VPN Provider

Every Gluetun setup requires a VPN service provider:

```csharp
var vpn = builder.AddGluetun("vpn")
    .WithVpnProvider("mullvad");
```

See the [Gluetun wiki](https://github.com/qdm12/gluetun-wiki) for the full list of supported providers.

## VPN Protocol

### WireGuard

```csharp
// String key (for development/testing)
vpn.WithWireGuard("my-private-key");

// Aspire parameter resource (recommended for secrets)
vpn.WithWireGuard(builder.AddParameter("wireguard-key", secret: true));
```

Sets `VPN_TYPE=wireguard` and `WIREGUARD_PRIVATE_KEY`.

### OpenVPN

```csharp
// String credentials (for development/testing)
vpn.WithOpenVpn("username", "password");

// Aspire parameter resources (recommended for secrets)
vpn.WithOpenVpn(
    builder.AddParameter("openvpn-user"),
    builder.AddParameter("openvpn-pass", secret: true));
```

Sets `VPN_TYPE=openvpn`, `OPENVPN_USER`, and `OPENVPN_PASSWORD`.

## Server Selection

```csharp
vpn.WithServerCountries("US", "Canada", "Germany");
vpn.WithServerCities("New York", "Toronto");
```

Values are comma-joined and set as `SERVER_COUNTRIES` / `SERVER_CITIES` environment variables.

## Proxy Features

Gluetun includes built-in HTTP and Shadowsocks proxies:

```csharp
vpn.WithHttpProxy();           // HTTPPROXY=on
vpn.WithHttpProxy(false);      // HTTPPROXY=off
vpn.WithShadowsocks();         // SHADOWSOCKS=on
vpn.WithShadowsocks(false);    // SHADOWSOCKS=off
```

To expose the proxy ports, pass them when creating the resource:

```csharp
var vpn = builder.AddGluetun("vpn", httpProxyPort: 8888, shadowsocksPort: 8388)
    .WithHttpProxy()
    .WithShadowsocks();
```

## Network & Firewall

```csharp
vpn.WithFirewallOutboundSubnets("10.0.0.0/8", "192.168.0.0/16");
vpn.WithTimezone("America/New_York");
```

`WithFirewallOutboundSubnets` sets `FIREWALL_OUTBOUND_SUBNETS`, useful for allowing traffic to local network resources outside the VPN tunnel.

## Generic Environment Variables

For any Gluetun environment variable not covered by the typed methods:

```csharp
// String value
vpn.WithGluetunEnvironment("DNS_ADDRESS", "1.1.1.1");

// Aspire parameter resource
vpn.WithGluetunEnvironment("UPDATER_PERIOD", builder.AddParameter("updater-period"));
```

This is useful for provider-specific settings. See the [Gluetun wiki](https://github.com/qdm12/gluetun-wiki) for the full list of environment variables.
